Fix a non-zero integer $N$.
Determine all functions $f : \Z \to \Z$ such that, for all $a, b \in \Z$,
\[ f(Na) + N f(b) = f(f(a + b)). \tag{*}\label{2019a1-eq0} \]



\subsection*{Answer}

$n \mapsto 0$ and $n \mapsto Nn + c$ for some $c \in \Z$.



\subsection*{Solution}

Official solution: \url{https://www.imo-official.org/problems/IMO2019SL.pdf}

We present Solution 1 of the official solution.
After obtaining linearity, we substitute $b = 0$ instead of just staring at the polynomial identity.
It is easy to check that $n \mapsto 0$ and $n \mapsto Nn + c$ satisfies~\eqref{2019a1-eq0} for any $c \in \Z$.

Start by substituting $(a, b) = (0, n + 1)$ and $(a, b) = (1, n)$ into~\eqref{2019a1-eq0}.
Comparing the two obtained equalities give us
\[ f(N) + N f(n) = f(0) + N f(n + 1) \implies f(n + 1) - f(n) = \frac{f(N) - f(0)}{N}. \]
Standard induction on both sides reveal that $f$ is linear.
That is, there exists $q, c \in \Z$ such that $f(n) = qn + c$ for all integers $n$.

Finally, substitute this equality and $b = 0$ into~\eqref{2019a1-eq0}.
The equation reduces to
\[ qNa + c + Nc = q(qa + c) + c \implies N(qa + c) = q(qa + c) \quad \text{for all } a \in \Z. \]
In particular, we have either $q = N$ or $f(a) = qa + c = 0$ for all $a \in \Z$.
The former also yields the solution $f(x) = Nx + c$.



\subsection*{Extra}

There is a possible generalization as follows.
Let $G$ be an additive abelian group.
Fix an arbitrary function $g : G \to G$ with $g(0) = 0$.
Fix some $T \in End(G)$, and assume that $T$ is injective.
Determine all functions $f : G \to G$ such that, for all $x, y \in G$,
\[ f(g(x)) + T f(y) = f(f(x + y)). \]

One can show that all such functions can be described by $\phi + C$, where $\phi \in \End(G)$ and $C \in G$ satisfies $\phi \circ g = T \phi = \phi^2$ and $\phi(C) = T(C)$.
For a proof, one can follow Solution 2 to do the necessary reductions.
However, this does not seem to significantly change the problem.
Meanwhile, it requires a non-trivial amount of change in implementation.
